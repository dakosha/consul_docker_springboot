import java.util.*;

public class AmazonQ1 {

    public static void main(String[] args) {

        String[] dat = {"Ba","Ba","Ba","c","BAb","Ba","Ba","cbC","Ba","Ba","Ba","Ba","Ba","cbC","Ba","Cd","Cc","BAb","bB","BAb","DCB","c","bB","abB","c","Ca","cbC","D","bB","a","cDa","Ba","BAb","Ba","Ba","Cc","Ba","bAD","D","Ba","CCb","Ba","B","c","Ca","Ca","Ba","cbC","Ba","D","Ba","Ba","d","d","CC","a","Cd","Ba","Ba","a","BB","Ba","A","Ba","Ba","CDc","Ba","c","a","Ca","D","C","ac","aa","D","Bbb","c","aa","ccB","C","c","BAb","dcC","Ba","c","Ba","Ba","Ba","BD","Ba","cB","c","d","Dc","cbC","BA","BAd","ABd","Ba","bB","DCB","CCd","dbc","bD","C","A","c","Ba","BAb","Ba","CCa","b","Ba","a","dbc","Cc","baD","CC","DCB","A","CB","c","DBc","dd","Ba","CC","D","C","dbc","Bb","DD","D","cCb","d","A","D","Cc","cd","dd","AB","baD","BAb","Ca","D","cbC","Ba","ABA","DCB","Ad","Ba","Ba","b","CBC","A","CC","d","D","cB","BCd","dbc","CC","acC","Ba","Ba","C","cD","caD","a","D","A","dDa","aa","Ba","d","c","Db","CBC","BD","cb","A","cb","bc","c","c","dcB","Ba","A","C","D","b","cd","bDb","Ba","CC","Ba","bc","AA","acC","b","aaa","B","d","DC","adB","cAA","cbC","Ca","b","ad","Db","aBB","dBA","AA","DAc","c","DCB","dB","C","aa","bdA","Ac","dbc","aBB","ccB","Ba","aBB","Dc","aa","cc","dA","BaD","bAA","b","Bcc","Adc","bdb","b","C","Aa","Ba","Ba","Ba","cd","Ba","Ca","ba","CC","ad","c","b","Ba","Ba","BB","aa","CCa","bB","D","Ba","c","d","ccB","ABd","aa","Ba","Dc","DB","cD","DD","Cc","cD","dB","Ba","dcC","Db","cc","bdb","dcB","dD","B","Ca","Ba","Dcd","Ba","Ad","Ad","C","A","d","dd","Ac","D","CC","bB","D","Ba","ABc","d","bc","Ba","aa","CC","Ba","BAb","dd","Dcd","aC","b","baD","Ba","bDa","b","a","BAd","Dab","d","dA","c","B","Cd","ac","DcB","A","BBC","Db","b","c","DDd","C","bbd","dcC","d","ABc","A","bdb","ABc","Bbb","Ba","DB","cAA","a","ba","a","B","b","dbc","cDd","cB","Ba","d","BAb","b","aa","c","bDb","c","A","A","D","dBC","Da","aa","bDB","CC","Ba","bB","Ba","BD","d","aBB","dB","Ba","ba","DDb","D","b","Ad","B","Ba","C","baD","Bbb","b","aAA","ABa","CcD","cAA","caD","Cac","Db","aaB","DD","aa","dd","CCb","DB","Cdc","DcB","C","A","Ac","B","A","aa","cbb","d","Ba","Da","dd","Ba","AbB","c","c","a","BB","B","Ba","cd","ad","Ba","CCd","ca","c","Bbb","dcC","BAd","ba","c","cB","Ba","D","bdb","cb","Ba","bdb","cb","Ba","b","bB","C","b","C","A","cB","ABc","C","dB","D","Ba","bdb","aBB","dcB","BA","ADD","ABd","dBA","cD","dBA","bCC","dab","cB","A","ca","Cb","A","C","aD","c","aBB","bCC","cbD","Ac","a","A","CB","AcD","Ba","bA","DDa","A","cA","Aa","aAA","Ba","BcB","Dd","BC","cc","Cdc","Adc","C","Ba","a","BB","Ba","abB","ba","aDA","dDB","ddB","b","Ac","cD","dca","BcC","CC","CCb","aca","a","BA","D","d","Ba","B","A","BB","C","bB","A","B","aC","a","d","dcC","DbB","B","aBc","Ad","bB","dA","DB","DBC","BcD","AcD","aBc","caD","a","C","dca","b","D","cc","A","aca","D","bCb","Ba","Cbb","ddB","A","abb","Bbb","dDB","Bbb","AbA","dA","c","cab","CCd","cBD","DCD","bCD","Dda","C","C","Bc","bA","a","DD","bd","bB","Ba","Bc","Ba","d","BdA","cD","BD","cdb","aDA","Ba","Cc","Ac","BCA","aDD","BD","c","a","d","aa","cc","cd","a","CB","dDB","cAA","BC","cB","A","aa","DDb","aBB","BAb","dbc","dBA","Ba","bd","AbD","C","CC","cD","a","C","Ba","Ba","AbA","Cda","CBD","Da","ca","BDa","A","AD","b","cCa","bDc","DDc","Aa","dDB","cD","A","Aac","bD","a","C","Ba","Ddd","CcD","bA","aa","baD","Cc","CCd","AD","b","a","BcD","bB","ABc","bbB","c","AaC","dA","bB","dcD","CB","abb","B","Cc","A","db","dd","A","AbA","aAC","ac","D","bB","b","d","B","A","Bbb","b","Ca","aBB","CB","Ba","A","BDa","cab","BDa","CC","C","dBC","a","dDC","cd","DDb","bB","A","Cd","A","AbA","dA","c","dBC","cc","Dd","bbd","DBB","CC","cD","C","c","DB","b","Ba","DcB","d","CC","Ba","A","cAb","cD","c","bac","Db","DCB","Ba","D","D","D","DCB","B","dcC","BB","b","A","CC","C","ca","Bd","Ba","c","d","d","AD","A","ab","D","D","C","d","D","ba","acB","B","dD","C","Ba","Cb","Ad","BcB","cD","acD","dbd","a","aC","A","cc","bbB","cB","cbC","Ac","D","C","b","dcB","Ca","DDb","DdC","A","c","cCa","BcD","C","DdD","cc","bB","BD","a","BB","c","cb","Ad","d","AbB","adD","c","B","bc","d","B","AD","Aa","bdC","b","Ba","Cc","BD","CDA","BBC","b","cDA","aca","C","d","dBA","Ba","BA","Ba","cAA","CdA","cA","c","cAb","bbD","CCC","Bbb","dDC","Dda","BDb","B","a","CC","Cc","Ba","Bd","cAb","c","A","c","cc","AA","c","AdD","C","bDC","C","A","BBA","aC","Ba","C","dba","aa","c","cd","Aa","C","dD","C","BD","aC","bcd","BA","D","Cc","BC","Ba","Bbb","C","B","dab","C","c","CBD","C","b","C","D","Ad","D","aa","a","d","Bbb","ac","DC","D","dD","d","D","C","Aba","ccd","CDB","dD","dB","d","caD","dBA","D","A","bDc","D","bbd","D","cDd","BDa","DCb","C","ACc","A","Bbb","aBB","c","Ac","C","d","AA","D","a","Bd","C","c","C","DCb","aC","cD","b","ACd","d","ad","bC","d","b"};

        List<String> data = Arrays.asList(dat);

        System.out.println(recentItems(data));
    }

    private static class Node {
        private Node(String value) {
            this.value = value;
        }

        private String value;
        private Node next = null;
        private Node prev = null;
    }

//    public static List<String> recentItems(List<String> logs) {
//        Integer max = Integer.MAX_VALUE;
//        TreeMap<String, Integer> map = new TreeMap<>();
//        for (String item : logs) {
//            map.put(item, max--);
//        }
//
//    }

    public static List<String> recentItems(List<String> logs) {
        Map<String, Node> mapOfNodes = new LinkedHashMap<>();
        Node head = null;

        for (String item : logs) {
            if (head == null) {
                head = new Node(item);
                mapOfNodes.put(item, head);
            } else {
                if (!mapOfNodes.containsKey(item)) {
                    Node temp = new Node(item);
                    mapOfNodes.put(item, temp);
                    temp.next = head;
                    head.prev = temp;
                    head = temp;
                } else {
                    Node fromMap = mapOfNodes.get(item);
                    if (fromMap.prev != null) {
                        if (fromMap.next != null) {
                            fromMap.prev.next = fromMap.next;
                            fromMap.next.prev = fromMap.prev;
                            fromMap.prev = null;
                            fromMap.next = head;
                            head.prev = fromMap;
                            head = fromMap;
                        } else {
                            fromMap.prev.next = null;
                            fromMap.prev = null;
                            fromMap.next = head;
                            head.prev = fromMap;
                            head = fromMap;
                        }
                    }
                }
            }
        }

        Node temp = head;
        List<String> result = new ArrayList<>();
        while (temp != null) {
            result.add(temp.value);
            temp = temp.next;
        }

        return result;
    }

}
